# UI é‡æ„è®¡åˆ’ - é›†æˆ iTerm2 Panel æ§åˆ¶

## å½“å‰ç•Œé¢ç»„ä»¶å±‚çº§

åŸºäº `global_remote_screen_renderer.dart` åˆ†æï¼š

```
Stack (æ ¹å®¹å™¨)
â”œâ”€ Listener (å¤„ç†æ‰€æœ‰è¾“å…¥äº‹ä»¶)
â”‚  â””â”€ RTCVideoView (WebRTC è§†é¢‘æµæ¸²æŸ“)
â”œâ”€ OnScreenRemoteMouse (è™šæ‹Ÿé¼ æ ‡ - AndroidTV/ç§»åŠ¨ç«¯)
â”œâ”€ MouseStyleRegion (é¼ æ ‡æ ·å¼ç®¡ç†)
â”œâ”€ OnScreenVirtualGamepad (è™šæ‹Ÿæ‰‹æŸ„)
â”œâ”€ EnhancedKeyboardPanel (å¢å¼ºé”®ç›˜é¢æ¿ - åŒ…å«å¿«æ·é”®æ¡)
â”œâ”€ FloatingShortcutButton (æ‚¬æµ®å¿«æ·é”®æŒ‰é’® - å³ä¸‹è§’)
â”œâ”€ MiniMap (å°åœ°å›¾ - ç”»é¢ç¼©æ”¾æ—¶æ˜¾ç¤º)
â”œâ”€ VideoInfoWidget (è§†é¢‘ä¿¡æ¯ - é¡¶éƒ¨ä¸­å¤®)
â””â”€ OnScreenVirtualMouse (è™šæ‹Ÿé¼ æ ‡ - é€šç”¨ç‰ˆæœ¬)
```

## è®¾è®¡ç›®æ ‡

åœ¨**ä¸ç ´åç°æœ‰åŠŸèƒ½**çš„å‰æä¸‹ï¼Œæ·»åŠ  iTerm2 Panel æ§åˆ¶å™¨ï¼š

1. **æ–°å¢ç»„ä»¶**ï¼š`ITerm2PanelController` - æ‚¬æµ®åœ¨å·¦ä¾§æˆ–é¡¶éƒ¨
2. **çŠ¶æ€æ˜¾ç¤º**ï¼šå½“å‰ä¸²æµçš„ Panel ä¿¡æ¯
3. **å¿«é€Ÿåˆ‡æ¢**ï¼šPanel åˆ—è¡¨ + æ•°å­—é”®å¿«æ·é”®
4. **è§†è§‰ä¸€è‡´æ€§**ï¼šå¤ç”¨ç°æœ‰çš„è®¾è®¡è¯­è¨€ï¼ˆæ¸å˜ã€åœ†è§’ã€åŠé€æ˜ï¼‰

## UI å¸ƒå±€æ–¹æ¡ˆ

### æ–¹æ¡ˆ Aï¼šå·¦ä¾§æŠ½å±‰å¼ï¼ˆæ¨èï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Panel æ§åˆ¶å™¨]        [è§†é¢‘æµç”»é¢]       [å³ä¾§] â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”â”‚
â”‚  â”‚Panel 1   â”‚  â”‚                      â”‚  â”‚å¿« â”‚â”‚
â”‚  â”‚Panel 2 âœ“ â”‚  â”‚   iTerm2 Window      â”‚  â”‚æ· â”‚â”‚
â”‚  â”‚Panel 3   â”‚  â”‚   (Panel 2 è£å‰ª)     â”‚  â”‚é”® â”‚â”‚
â”‚  â”‚Panel 4   â”‚  â”‚                      â”‚  â”‚   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ï¿½ï¿½â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”˜â”‚
â”‚  [æŠ˜å /å±•å¼€]         [å°åœ°å›¾]          [æ‚¬æµ®] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¼˜ç‚¹ï¼š
- ä¸é®æŒ¡ç”»é¢ä¸­å¿ƒåŒºåŸŸ
- å¯æŠ˜å ï¼ŒèŠ‚çœç©ºé—´
- ä¸æ–‡ä»¶ç®¡ç†å™¨ç­‰åº”ç”¨ä¸€è‡´

ç¼ºç‚¹ï¼š
- å ç”¨å·¦ä¾§ç©ºé—´
```

### æ–¹æ¡ˆ Bï¼šé¡¶éƒ¨æ ‡ç­¾æ å¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Panel: 1] [Panel: 2 âœ“] [Panel: 3] [Panel: 4] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                â”‚
â”‚              iTerm2 Window (Panel 2)           â”‚
â”‚                                                â”‚
â”‚                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¼˜ç‚¹ï¼š
- èŠ‚çœä¾§è¾¹ç©ºé—´
- ç±»ä¼¼æµè§ˆå™¨æ ‡ç­¾ï¼Œç›´è§‚

ç¼ºç‚¹ï¼š
- å ç”¨é¡¶éƒ¨ç©ºé—´ï¼Œå¯èƒ½é®æŒ¡å†…å®¹
- Panel å¤šæ—¶éœ€è¦æ»šåŠ¨
```

### æ–¹æ¡ˆ Cï¼šæ‚¬æµ®é¢æ¿å¼ï¼ˆç±»ä¼¼å¿«æ·é”®æŒ‰é’®ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ğŸ“±]                                    [âŒ¨ï¸]  â”‚
â”‚   â””â”€ Panel æ§åˆ¶å™¨æ‚¬æµ®æŒ‰é’®              å¿«æ·é”®  â”‚
â”‚                                                â”‚
â”‚              iTerm2 Window (Panel 2)           â”‚
â”‚                                                â”‚
â”‚                                          [ğŸ“] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ç‚¹å‡» [ğŸ“±] å±•å¼€ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ iTerm2 Panelsâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â— Panel 1    â”‚
â”‚ âœ“ Panel 2    â”‚
â”‚ â— Panel 3    â”‚
â”‚ â— Panel 4    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¼˜ç‚¹ï¼š
- å®Œå…¨ä¸å ç”¨ç©ºé—´ï¼ˆæŠ˜å æ—¶ï¼‰
- ä¸ç°æœ‰æ‚¬æµ®å¿«æ·é”®æŒ‰é’®ä¸€è‡´
- çµæ´»å¯æ‹–åŠ¨

ç¼ºç‚¹ï¼š
- éœ€è¦é¢å¤–ç‚¹å‡»æ‰èƒ½çœ‹åˆ° Panel åˆ—è¡¨
```

## æ¨èæ–¹æ¡ˆï¼šæ–¹æ¡ˆ C + æ–¹æ¡ˆ A æ··åˆ

**é»˜è®¤çŠ¶æ€**ï¼šå·¦ä¸Šè§’æ‚¬æµ®æŒ‰é’®ï¼ˆç±»ä¼¼æ–¹æ¡ˆ Cï¼‰
**å±•å¼€çŠ¶æ€**ï¼šå·¦ä¾§æŠ½å±‰ï¼ˆç±»ä¼¼æ–¹æ¡ˆ Aï¼‰

```dart
// æ–°ç»„ä»¶ï¼šITerm2PanelController
class ITerm2PanelController extends StatefulWidget {
  @override
  Widget build(BuildContext context) {
    return Stack(
      children: [
        // æ‚¬æµ®è§¦å‘æŒ‰é’®ï¼ˆå·¦ä¸Šè§’ï¼‰
        Positioned(
          left: 16,
          top: 16,
          child: _buildTriggerButton(),
        ),
        
        // æŠ½å±‰é¢æ¿ï¼ˆå±•å¼€æ—¶æ˜¾ç¤ºï¼‰
        if (_isExpanded)
          Positioned(
            left: 0,
            top: 0,
            bottom: 0,
            child: _buildDrawer(),
          ),
      ],
    );
  }
}
```

## é›†æˆåˆ°ç°æœ‰ç•Œé¢

ä¿®æ”¹ `global_remote_screen_renderer.dart` çš„ Stackï¼š

```dart
Stack(
  children: [
    // ... ç°æœ‰ç»„ä»¶ ...
    const EnhancedKeyboardPanel(),
    const FloatingShortcutButton(),
    
    // æ–°å¢ï¼šiTerm2 Panel æ§åˆ¶å™¨
    if (AppPlatform.isMacOS)
      const ITerm2PanelController(),
    
    _buildMiniMap(),
    // ... å…¶ä»–ç»„ä»¶ ...
  ],
)
```

## äº¤äº’é€»è¾‘ï¼ˆé™æ€åŸå‹é˜¶æ®µï¼‰

### ç›®æ ‡

åœ¨ä¸æ¥å…¥åç«¯çš„æƒ…å†µä¸‹ï¼Œå…ˆæŠŠ UI å’Œäº¤äº’ä½“éªŒè·‘é€šï¼š

- å±•å¼€/æŠ˜å æŠ½å±‰
- Panel åˆ—è¡¨ç‚¹å‡»é€‰ä¸­
- æ•°å­—é”® 1-9 åˆ‡æ¢ Panel
- åˆ·æ–°æŒ‰é’®ï¼ˆæ¨¡æ‹Ÿï¼‰

## ä¸‹ä¸€æ­¥

1. åˆ›å»º `lib/widgets/iterm2/iterm2_panel_controller.dart`ï¼ˆçº¯ UI + mock æ•°æ®ï¼‰
2. å°†ç»„ä»¶æŒ‚åˆ° `global_remote_screen_renderer.dart` çš„ Stack
3. åœ¨çœŸæœºä¸ŠéªŒè¯ä¸é®æŒ¡å¿«æ·é”®æŒ‰é’®ã€å°åœ°å›¾ã€é¼ æ ‡ç­‰ UI
